<!DOCTYPE html>
<html lang="en">
<%- include('head') %>

<body>
	<a href="/month/January">January</a>
	<a href="/month/February">February</a>
	<a href="/month/March">March</a>


	<main>
		<section id="overview">
			<%- include('header') %>
			<%- include('user_actions') %>
			<div>
				<% if (locals.data) { %>
				<% data.forEach(item => { %>
				<a href="/apod/<%= item.id %>" copyright="<%= item.copyright %>">
					<span>
						<img src="<%= item.hdurl %>" title="<%= item.title %>" alt="NASA Astronomy Picture">
						<p><%= item.date %></p>
					</span>
				</a>
				<% }) } else { %>
				<p>Something went wrong, couldn't load the data!</p>
				<% } %>
			</div>
		</section>
	</main>

	<script type="module" src="../scripts/handlers.js"></script>
	<script>
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', () => {
				navigator.serviceWorker.register('/serviceWorker.js')
					.then(registration => {
						console.log('updating')
						registration.update()
					})
					.catch(err => console.log(`ServiceWorker failed registration: ${err}`))
				console.log('serviceWorker registered!')
			})
		}
	</script>
</body>

</html>